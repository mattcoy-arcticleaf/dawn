{% comment %}
  Renders Product Inventory Details
  Accepts:
  - section_id: {String} ID of the section that includes this snippet
  - text_style: {String} Style class or identifier for inventory text (e.g., 'bold', 'subdued')
  - inventory_threshold: {Number} Threshold to determine low inventory (e.g., show "Only X left" when below this)
  - show_inventory_quantity: {Boolean} Whether to display the actual inventory count to the customer

  Usage:
  {% render 'product-inventory', 
      section_id: section.id, 
      text_style: block.settings.text_style, 
      inventory_threshold: block.settings.inventory_threshold, 
      show_inventory_quantity: block.settings.show_inventory_quantity 
  %}
{% endcomment %}

{% assign product_quantity = product.selected_or_first_available_variant.inventory_quantity %}
{% assign inventory_management = product.selected_or_first_available_variant.inventory_management %}

<p  
    class="product__inventory
    
    {% if text_style == 'uppercase' %} 
      caption-with-letter-spacing
    {% elsif text_style == 'subtitle' %} 
      subtitle
    {% endif %}

    {% if inventory_management != 'shopify' %} 
      visibility-hidden
    {% endif %}"

    {{ block.shopify_attributes }}  
    id="Inventory-{{ section_id }}"  
    role="status"
>
    {%- if inventory_management == 'shopify' -%}
        {%- if product_quantity > 0 -%}
            {%- if product_quantity <= inventory_threshold -%}
                <span class="svg-wrapper" style="color: rgb(238, 148, 65)">
                    {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                </span>
                {%- if show_inventory_quantity -%}
                    {{- 'products.product.inventory_low_stock_show_count'| t: quantity: product_quantity -}}
                {%- else -%}
                    {{- 'products.product.inventory_low_stock' | t -}}
                {%- endif -%}
            {%- else -%}
                <span class="svg-wrapper" style="color: rgb(62, 214, 96)">
                    {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                </span>
                {%- if show_inventory_quantity -%}
                    {{- 'products.product.inventory_in_stock_show_count' 
                        | t: quantity: product_quantity 
                    -}}
                {%- else -%}
                    {{- 'products.product.inventory_in_stock' | t -}}
                {%- endif -%}
            {%- endif -%}
        {%- else -%}
            {%- if product.selected_or_first_available_variant.inventory_policy == 'continue' -%}
                <span class="svg-wrapper" style="color: rgb(62, 214, 96)">
                    {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                </span>
                {{- 'products.product.inventory_out_of_stock_continue_selling' | t -}}
            {%- else -%}
                <span class="svg-wrapper" style="color: rgb(200, 200, 200)">
                    {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                </span>
                {{- 'products.product.inventory_out_of_stock' | t -}}
            {%- endif -%}
        {%- endif -%}
    {%- endif -%}
</p>